#!/usr/bin/env sh

echo "ğŸ” Verificando se precisa incrementar versÃ£o..."

# Verifica se estÃ¡ na branch main
current_branch=$(git branch --show-current)

if [ "$current_branch" = "main" ]; then
  echo "ğŸ“¦ Executando auto-versionamento na branch main..."
  dart tool/auto_version.dart
  
  if [ $? -eq 0 ]; then
    echo "âœ… Versionamento automÃ¡tico concluÃ­do"
    # Adiciona os arquivos modificados ao commit atual
    git add pubspec.yaml lib/src/version.dart
  else
    echo "âŒ Erro no versionamento automÃ¡tico"
    exit 1
  fi
else
  echo "âš ï¸  Pulando auto-versionamento (nÃ£o estÃ¡ na branch main)"
fi
